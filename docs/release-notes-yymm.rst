==========================================
GroupServer YY.MM — Sherry sipped silently
==========================================
----------
Unreleased
----------

:Authors: `Michael JasonSmith`_;
:Contact: Michael JasonSmith <mpj17@ldots.org>
:Date: 2016-10-21
:Organization: `GroupServer.org`_
:Copyright: This document is licensed under a
  `Creative Commons Attribution-Share Alike 4.0 International
  License`_

..  _Creative Commons Attribution-Share Alike 4.0 International License:
    https://creativecommons.org/licenses/by-sa/4.0/

.. highlight:: console

------------
Introduction
------------

Of the visible `changes to GroupServer`_ in the Sherry release is
the new *Request contact* page. You can `get Sherry`_
immediately.

----------------------
Changes to GroupServer
----------------------

In Sherry the `Request contact page`_ has been vastly
improved. Finally, there have been some `minor improvements`_.

.. index::
   pair: Notification; Request contact

Request contact page
====================

The *Request contact* page has been updated so it now has a new
HTML-formatted message, it is more robust, and better tested.
The *Request contact* page allows group members to contact each
other while also being able to **lurk in peace** (just read
messages, without posting, and without anyone directly contacting
them). If a member wants to contact someone else they can use the
*Request contact* page to send a short message along with their
contact details. If the person being contacted wishes the
interaction to continue then they can reply.

The system has been largely rewritten (closing `Issue 627`_). The
new page will now send a HTML-formatted notification, along with
a plain-text message (closing `Issue 3409`_). The wording of the
notification has been improved, and the page itself now uses `the
standard GroupServer style.`_

The *Request contact* page is now more robust with better
handling of messages with Unicode characters and people that lack
verified email addresses. As part of the rewrite, unit tests have
been added to enhance the reliability of the page.

Internationalisation support has also been added to the page.

The *Request contact* notification was the last one to have an
HTML message crafted, and be moved to the file-system. Creating
the new notification (finally) closes `Issue 269`_.

:Acknowledgements: Thanks to Robert_ and `Alice Rose`_ for their
                   help with the *Request contact* page.

.. _Issue 627: https://redmine.iopen.net/issues/627
.. _Issue 3409: https://redmine.iopen.net/issues/3409
.. _the standard GroupServer style.:
   http://groupserver.readthedocs.io/projects/gscontentformbase/en/latest/style.html
.. _Issue 269: https://redmine.iopen.net/issues/269


.. index::
   pair: Notification; Welcome
   pair: Profile; Activity log
   pair: Topic; Keywords
   triple: Group; Member; Invite

Minor improvements
==================

* **German** language updates.
* An error that prevented the *Profile log* (found as
  ``log.html`` under a profile) from being shown has been fixed.
* An error with password-link creation in the *Welcome*
  notification that is generated by the *Add member* system has
  been fixed. (Thanks to Robert_ for spotting this issue.)
* The **Invite members in bulk** system is now more robust, as it
  will handle *tab* separated values, as well as *comma*
  separated values (CSV), with thanks to `Piers Goodhew`_.
* Email addresses and web-page addresses are now omitted from the
  **topic keywords**, closing `Bug 3919`_ and `Bug 4028`_.
* The image-processing code is now more robust, including the
  scaling of very wide and very short images, with thanks to
  `Donald Winship`_ for pointing out the issue.
* Errors in the :doc:`development` documentation have been fixed,
  with thanks to `Nick Bell`_.
* The creation of a development build of GroupServer is now
  easier, and better documented.
* The *favicon* images have been optimised.
* :pep:`484` type hints have been added to some low-level
  libraries.

.. _Piers Goodhew:
   http://groupserver.org/p/4PI0NlxVg75Z6a8puM0zbv
.. _Nick Bell: http://groupserver.org/p/3Fkga91WZ1O65yPEh0QYOb
.. _Donald Winship:
   http://groupserver.org/p/1cQiyqkdTbIFKQjlqzq49Z
.. _Bug 3919: https://redmine.iopen.net/issues/3939
.. _Bug 4028: https://redmine.iopen.net/issues/4028

----------
Get Sherry
----------
Unreleased
==========

To get Sherry go to `the Downloads page for GroupServer`_
and follow `the GroupServer Installation documentation`_. Those
who already have a functioning installation can `update an
existing GroupServer system`_.

..  _The Downloads page for GroupServer: http://groupserver.org/downloads
..  _The GroupServer Installation documentation:
    http://groupserver.readthedocs.io/

Update an existing GroupServer system
=====================================

To update a system running the Pastis (16.04) release of
GroupServer to Sherry (YY.MM) carry out the following steps.

#.  Copy the new versions of the configuration files to your
    existing GroupServer installation:

      ::

        $ cp ../groupserver-yy.mm/[bivz]*cfg  .

#.  Run ``buildout`` in your existing GroupServer installation:

      ::

        $ ./bin/buildout -N

#.  Update the SQL function that generates the topic keywords:

      ::

        $ shopt -s globstar  # This makes the ** below work
        $ psql -U {psql_user} -h {psql_host} {psql_dbname} -f \
          eggs/gs.group.messages.topic.base*/**/03-keywords.sql 

    Where ``{psql_user}``, ``{psql_host}``, ``{psql_dbname}`` are
    the name of your PostgreSQL user, host, and database, as
    configured during your :doc:`groupserver-install`.

#.  Restart your GroupServer instance (see
    :doc:`groupserver-start`).

---------
Resources
---------

- Code repository: https://github.com/groupserver/
- Questions and comments to
  http://groupserver.org/groups/development
- Report bugs at https://redmine.iopen.net/projects/groupserver

..  _GroupServer: http://groupserver.org/
..  _GroupServer.org: http://groupserver.org/
..  _OnlineGroups.Net: https://onlinegroups.net/
..  _Michael JasonSmith: http://groupserver.org/p/mpj17
..  _Dan Randow: http://groupserver.org/p/danr
..  _Bill Bushey: http://groupserver.org/p/wbushey
.. _Robert: http://groupserver.org/p/1lPEQHbcXYdNuKp41Psm4S
..  _Alice Rose: https://twitter.com/heldinz
..  _E-Democracy.org: http://forums.e-democracy.org/

..  LocalWords:  refactored iopen JPEG redmine jQuery jquery async Rakı Bushey
..  LocalWords:  Randow Organization sectnum Slivovica DMARC CSS Calvados AIRA
..  LocalWords:  SMTP smtp mbox CSV Transifex cfg mkdir groupserver Vimeo WAI
..  LocalWords:  buildout Limoncello iframe Pastis Linter
..  LocalWords:  favicon Goodhew
